---
title: COVID in the US and the World
author: Robert W. Walker
date: '2020-03-25'
slug: covid-in-the-us-and-the-world
categories: []
tags: []
subtitle: ''
summary: ''
authors: []
lastmod: '2020-03-25T23:33:58-07:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/pymjs/pym.v1.js"></script>
<script src="/rmarkdown-libs/widgetframe-binding/widgetframe.js"></script>


<div id="the-johns-hopkins-dashboard" class="section level1">
<h1>The Johns Hopkins dashboard</h1>
<p>This is what <a href="https://coronavirus.jhu.edu/map.html">Johns Hopkins has provided as a dashboard using ARCGIS</a>. They have essentially layered out the data into national and subnational data and then used the arcgis dashboard to cycle through them.</p>
<iframe width="650" height="400" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" title="2019-nCoV" src="//gisanddata.maps.arcgis.com/apps/Embed/index.html?webmap=14aa9e5660cf42b5b4b546dec6ceec7c&amp;extent=77.3846,11.535,163.5174,52.8632&amp;zoom=true&amp;previewImage=false&amp;scale=true&amp;disable_scroll=true&amp;theme=light">
</iframe>
</div>
<div id="the-data" class="section level1">
<h1>The data</h1>
<pre class="r"><code>library(tidyverse); library(sf); library(rnaturalearth); library(rnaturalearthdata); library(ggmap)
March26JH &lt;- read_csv(url(&quot;https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_daily_reports/03-26-2020.csv&quot;))</code></pre>
</div>
<div id="a-leaflet" class="section level1">
<h1>A Leaflet</h1>
<p>Johns Hopkins also has an extensive collection of data. Let’s see what one set looks like.</p>
<pre class="r"><code>library(leaflet); library(rMaps); library(leaflet.extras)
L2 &lt;- leaflet(March26JH) %&gt;% 
  addTiles() %&gt;% 
#  addCircles(lng = ~Long, lat = ~Lat, weight = 1, radius = 1, popup = ~Combined_Key) %&gt;% 
  addHeatmap(lng=~Long_,
             lat=~Lat,
             radius = 9,
             intensity = ~Confirmed)
library(widgetframe)
frameWidget(L2)</code></pre>
<div id="htmlwidget-1" style="width:100%;height:480px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"url":"/post/2020-03-25-covid-in-the-us-and-the-world/index_files/figure-html//widgets/widget_unnamed-chunk-2.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="jburnmurdoch-of-the-financial-times" class="section level1">
<h1><code>@jburnmurdoch</code> of the Financial Times</h1>
<pre class="r"><code>SR.TS &lt;- read_csv(url(&quot;https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/who_covid_19_situation_reports/who_covid_19_sit_rep_time_series/who_covid_19_sit_rep_time_series.csv&quot;))</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   .default = col_double(),
##   `Province/States` = col_character(),
##   `Country/Region` = col_character(),
##   `WHO region` = col_character(),
##   `3/5/2020` = col_character()
## )</code></pre>
<pre><code>## See spec(...) for full column specifications.</code></pre>
<p>Something is wrong with the <code>3/5/2020</code> column. It has two values; one a number and another parenthetical number. I just remove the parenthetical.</p>
<pre class="r"><code>SR.TS &lt;- SR.TS %&gt;% mutate(`3/5/2020` = as.numeric(str_remove(`3/5/2020`,&quot;(418)&quot;)))</code></pre>
<pre><code>## Warning: NAs introduced by coercion</code></pre>
</div>
<div id="global-coronavirus-cases" class="section level1">
<h1>Global Coronavirus Cases</h1>
<p>Now it is time to rearrange this data. Let’s start with the global case totals.</p>
<pre class="r"><code>SR.Global &lt;- SR.TS %&gt;% filter(`Country/Region`==&quot;Globally&quot;) %&gt;% pivot_longer(cols=c(4:dim(SR.TS)[[2]])) %&gt;% pivot_wider(., names_from = `Province/States`, values_from = value) %&gt;% mutate(date=as.Date(name, format = &quot;%m/%d/%Y&quot;))</code></pre>
<div id="the-plot" class="section level2">
<h2>The Plot</h2>
<pre class="r"><code>ggplot(SR.Global) +
 aes(x = date, y = Confirmed) +
 geom_line(size = 1L, colour = &quot;#c6dbef&quot;) +
 geom_point(size = 1L, colour = &quot;#c6dbef&quot;) +
 labs(x = &quot;Date&quot;, y = &quot;Confirmed Cases&quot;, title = &quot;Global Cases of Coronavirus&quot;) +
 hrbrthemes::theme_ft_rc()</code></pre>
<p><img src="/post/2020-03-25-covid-in-the-us-and-the-world/index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
</div>
<div id="deaths" class="section level1">
<h1>Deaths</h1>
<pre class="r"><code>ggplot(SR.Global) +
 aes(x = date, y = Deaths) +
 geom_line(size = 1L, colour = &quot;#c6dbef&quot;) +
 geom_point(size = 1L, colour = &quot;#c6dbef&quot;) +
 labs(x = &quot;Date&quot;, y = &quot;Confirmed Cases&quot;, title = &quot;Reported Global Deaths from COVID-19&quot;) +
 hrbrthemes::theme_ft_rc()</code></pre>
<pre><code>## Warning: Removed 56 row(s) containing missing values (geom_path).</code></pre>
<pre><code>## Warning: Removed 56 rows containing missing values (geom_point).</code></pre>
<p><img src="/post/2020-03-25-covid-in-the-us-and-the-world/index_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>That is legitimately odd.</p>
<pre class="r"><code>TS2 &lt;- read_csv(url(&quot;https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv&quot;))
Tidy.Counts &lt;- TS2 %&gt;% pivot_longer(., cols=c(5:dim(TS2)[[2]]), names_to = &quot;date&quot;, values_to = &quot;Cases&quot;)</code></pre>
</div>
