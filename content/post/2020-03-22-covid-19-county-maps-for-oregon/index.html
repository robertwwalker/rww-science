---
title: COVID-19 County Maps for Oregon
author: Robert W. Walker
date: '2020-03-22'
slug: covid-19-county-maps-for-oregon
categories:
  - tidyverse
  - web scraping
tags:
  - tidyverse
  - R
subtitle: ''
summary: ''
authors: []
lastmod: '2020-03-22T20:46:49-07:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
---



<div id="oregon-covid-data" class="section level2">
<h2>Oregon COVID data</h2>
<p>I now have a few days of data. The scraping script appears at the bottom of the post; I am only using the county level data. These data are current as of March 22, 2020.</p>
</div>
<div id="a-base-map" class="section level2">
<h2>A base map</h2>
<p>I am going to use the <code>urbnmapr</code> package to grab the county map for Oregon. A few steps. Load the library then grab the map as an <code>sf</code> object; there is a <code>geom_sf</code> that makes them easy to work with. Next I filter Oregonâ€™s counties. Finally, I join the map to the data.</p>
</div>
<div id="the-whole-thing-an-animation" class="section level1">
<h1>The Whole Thing: An Animation</h1>
<p><img src="/post/2020-03-22-covid-19-county-maps-for-oregon/index_files/figure-html/unnamed-chunk-3-1.gif" /><!-- --></p>
<div id="a-mapping-function" class="section level2">
<h2>A Mapping Function</h2>
<p>To save time later, I turned the plots into a function so that I can use to reproduce each frame. Two inputs to the function, the dataset that is always the merged data from above and the date that I want to plot located in <code>date1</code> in a <code>YYYY-MM-DD</code> format.</p>
</div>
<div id="the-result-for-03182020" class="section level2">
<h2>The Result for 03/18/2020</h2>
<p>This is the first date for which I can find data. The <code>waybackmachine</code> was crucial.</p>
<p><img src="/post/2020-03-22-covid-19-county-maps-for-oregon/index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
<div id="the-result-for-03192020" class="section level2">
<h2>The Result for 03/19/2020</h2>
<p><img src="/post/2020-03-22-covid-19-county-maps-for-oregon/index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
<div id="the-result-for-03202020" class="section level2">
<h2>The Result for 03/20/2020</h2>
<p><img src="/post/2020-03-22-covid-19-county-maps-for-oregon/index_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
<div id="the-result-for-03212020" class="section level2">
<h2>The Result for 03/21/2020</h2>
<p><img src="/post/2020-03-22-covid-19-county-maps-for-oregon/index_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="the-result-for-03222020" class="section level2">
<h2>The Result for 03/22/2020</h2>
<p><img src="/post/2020-03-22-covid-19-county-maps-for-oregon/index_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="the-new-section" class="section level2">
<h2>The New Section</h2>
<div id="a-scraper" class="section level3">
<h3>A Scraper</h3>
<p>I have written some code here to grab the updates as they post them and add them to the dataset. Now I need to set an cron job to evaluate this script daily.</p>
</div>
<div id="adding-historical-data-together" class="section level3">
<h3>Adding Historical Data Together</h3>
</div>
<div id="put-it-all-together" class="section level3">
<h3>Put it all together</h3>
</div>
</div>
</div>
