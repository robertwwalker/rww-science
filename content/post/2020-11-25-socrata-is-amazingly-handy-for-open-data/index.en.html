---
title: Socrata is amazingly handy for open data
author: RWW
date: '2020-11-25'
slug: socrata-is-amazingly-handy-for-open-data
categories:
  - R
tags: []
subtitle: ''
summary: ''
authors: []
lastmod: '2020-11-25T13:16:28-08:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
---

<script src="{{< blogdown/postref >}}index.en_files/header-attrs/header-attrs.js"></script>
<script src="{{< blogdown/postref >}}index.en_files/htmlwidgets/htmlwidgets.js"></script>
<script src="{{< blogdown/postref >}}index.en_files/plotly-binding/plotly.js"></script>
<script src="{{< blogdown/postref >}}index.en_files/typedarray/typedarray.min.js"></script>
<script src="{{< blogdown/postref >}}index.en_files/jquery/jquery.min.js"></script>
<link href="{{< blogdown/postref >}}index.en_files/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="{{< blogdown/postref >}}index.en_files/crosstalk/js/crosstalk.min.js"></script>
<link href="{{< blogdown/postref >}}index.en_files/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="{{< blogdown/postref >}}index.en_files/plotly-main/plotly-latest.min.js"></script>


<p>The Socrata package makes it easy to access API calls built around SODA for open data access. If you try to skip the Socrata part, you usually only get a fraction of the available data.</p>
<pre><code>install.packages(&quot;RSocrata&quot;)
library(RSocrata)
SchoolSpend &lt;- read.socrata(&quot;https://data.oregon.gov/resource/c7av-ntdz.csv&quot;)</code></pre>
<p>The first bit of data that I found details various bits about spending and students in Oregon school districts. I want to look at a few basics of this. There is a lot more to plot but this is enough for now.</p>
<div id="the-data" class="section level2">
<h2>The Data</h2>
<p>I found this on Oregon’s open data portal. What do I have?</p>
<pre class="r"><code>library(skimr)
skim(SchoolSpend)</code></pre>
<table>
<caption><span id="tab:unnamed-chunk-1">Table 1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">SchoolSpend</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">2205</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">10</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">7</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">county_name</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">10</td>
<td align="right">0</td>
<td align="right">36</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">district_number</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">9</td>
<td align="right">33</td>
<td align="right">0</td>
<td align="right">375</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">school_year</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">10</td>
<td align="right">10</td>
<td align="right">0</td>
<td align="right">13</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table style="width:100%;">
<colgroup>
<col width="20%" />
<col width="6%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="7%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="3%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">district_id</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">2094.94</td>
<td align="right">189.48</td>
<td align="right">1894.0</td>
<td align="right">1999.00</td>
<td align="right">2085.00</td>
<td align="right">2190.00</td>
<td align="right">4131.00</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">operating_cost_per_student</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">10337.76</td>
<td align="right">7762.80</td>
<td align="right">0.0</td>
<td align="right">7252.19</td>
<td align="right">8596.27</td>
<td align="right">10797.39</td>
<td align="right">170210.60</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">student_count</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">2900.14</td>
<td align="right">6105.83</td>
<td align="right">0.0</td>
<td align="right">234.00</td>
<td align="right">872.00</td>
<td align="right">2934.00</td>
<td align="right">55321.00</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">state_student_count</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">552475.19</td>
<td align="right">5910.95</td>
<td align="right">539105.0</td>
<td align="right">549169.00</td>
<td align="right">552161.00</td>
<td align="right">558366.00</td>
<td align="right">561354.00</td>
<td align="left">▂▂▇▃▆</td>
</tr>
<tr class="odd">
<td align="left">operating_cost</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">22756620.87</td>
<td align="right">49527514.39</td>
<td align="right">9881.0</td>
<td align="right">2458166.78</td>
<td align="right">7089257.97</td>
<td align="right">22617257.11</td>
<td align="right">513891919.14</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">state_operating_cost</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">4337006498.57</td>
<td align="right">697307559.84</td>
<td align="right">948447366.8</td>
<td align="right">3889552066.13</td>
<td align="right">4198534676.94</td>
<td align="right">5144636555.37</td>
<td align="right">5248233458.10</td>
<td align="left">▁▁▁▇▆</td>
</tr>
<tr class="odd">
<td align="left">state_operating_cost_per_student</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">7839.08</td>
<td align="right">1195.04</td>
<td align="right">1759.3</td>
<td align="right">7044.24</td>
<td align="right">7636.57</td>
<td align="right">9164.69</td>
<td align="right">9384.06</td>
<td align="left">▁▁▁▇▆</td>
</tr>
</tbody>
</table>
</div>
<div id="how-many-school-districts-per-county" class="section level2">
<h2>How many school districts per county?</h2>
<pre class="r"><code>library(magrittr); library(hrbrthemes)</code></pre>
<pre><code>## 
## Attaching package: &#39;magrittr&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     set_names</code></pre>
<pre><code>## The following object is masked from &#39;package:tidyr&#39;:
## 
##     extract</code></pre>
<pre class="r"><code>SchoolSpend %&gt;% group_by(county_name, school_year) %&gt;% tally() %&gt;% mutate(school_year = as.Date(school_year, format = &quot;%m/%d/%Y&quot;)) %&gt;% filter(school_year == max(school_year)) %&gt;% ggplot() + aes(x=fct_reorder(county_name, n), y=n, fill=county_name) + geom_col() + coord_flip() + guides(fill=FALSE) + labs(x= &quot;County&quot;, y=&quot;Number of School Districts&quot;) + theme_minimal()</code></pre>
<p><img src="{{< blogdown/postref >}}index.en_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="by-students" class="section level2">
<h2>By Students?</h2>
<pre class="r"><code>SchoolSpend %&gt;% group_by(county_name) %&gt;% mutate(school_year = as.Date(school_year, format = &quot;%m/%d/%Y&quot;)) %&gt;% filter(school_year == max(school_year)) %&gt;% summarise(Students = sum(student_count), Year = mean(school_year), County = as.factor(county_name)) %&gt;% unique() -&gt; Dat</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;county_name&#39;. You can override using the `.groups` argument.</code></pre>
<pre class="r"><code>ggplot(Dat) + aes(x=fct_reorder(County, -Students), y=Students, fill=county_name) + geom_col() + coord_flip() + guides(fill=FALSE) + labs(x= &quot;County&quot;, y=&quot;Students&quot;) + theme_minimal()</code></pre>
<p><img src="{{< blogdown/postref >}}index.en_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>There are a number of other bits of data organized by year and district. There is certainly more to examine, but then I found this.</p>
</div>
<div id="voter-registration-data" class="section level1">
<h1>Voter Registration Data</h1>
<p>The database of Voter Registrations in Oregon is also available and easily accessible.</p>
<pre class="r"><code>VoterReg &lt;- read.socrata(&quot;https://data.oregon.gov/resource/6a4f-ecbi.csv&quot;)
VoterReg %&gt;% filter(sysdate == &quot;2020-11-03&quot;) %&gt;% group_by(county) %&gt;% summarise(Voters = sum(count_v_id)) %&gt;% ggplot(., aes(x=fct_reorder(county, Voters), y=Voters, label=Voters)) + geom_col(fill=&quot;white&quot;, color=&quot;skyblue&quot;) + geom_text(size=2.2) + coord_flip() + labs(x=&quot;County&quot;, y=&quot;Registered Voters&quot;) + theme_minimal() -&gt; Plot1
Plot1</code></pre>
<p><img src="{{< blogdown/postref >}}index.en_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code>library(plotly)
ggplotly(Plot1)</code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"data":[{"orientation":"h","width":[0.899999999999999,0.899999999999999,0.900000000000006,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.9,0.9,0.9,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.9,0.900000000000006,0.899999999999999,0.899999999999999,0.899999999999999,0.900000000000002,0.899999999999999,0.900000000000006,0.899999999999999,0.9,0.899999999999999,0.899999999999999,0.899999999999999,0.9,0.899999999999999,0.900000000000006,0.9,0.899999999999999],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[12537,60675,308827,30457,40327,47810,19265,18713,152679,84145,1401,5529,5508,15791,161594,16128,68959,49375,5431,274665,38440,94188,16812,215012,6779,572333,60775,1437,20732,46898,19058,5933,18264,386696,1090,73893],"y":[9,24,34,18,20,22,16,14,30,28,2,6,5,10,31,11,26,23,4,33,19,29,12,32,8,36,25,3,17,21,15,7,13,35,1,27],"text":["fct_reorder(county, Voters): BAKER<br />Voters:  12537<br />Voters:  12537","fct_reorder(county, Voters): BENTON<br />Voters:  60675<br />Voters:  60675","fct_reorder(county, Voters): CLACKAMAS<br />Voters: 308827<br />Voters: 308827","fct_reorder(county, Voters): CLATSOP<br />Voters:  30457<br />Voters:  30457","fct_reorder(county, Voters): COLUMBIA<br />Voters:  40327<br />Voters:  40327","fct_reorder(county, Voters): COOS<br />Voters:  47810<br />Voters:  47810","fct_reorder(county, Voters): CROOK<br />Voters:  19265<br />Voters:  19265","fct_reorder(county, Voters): CURRY<br />Voters:  18713<br />Voters:  18713","fct_reorder(county, Voters): DESCHUTES<br />Voters: 152679<br />Voters: 152679","fct_reorder(county, Voters): DOUGLAS<br />Voters:  84145<br />Voters:  84145","fct_reorder(county, Voters): GILLIAM<br />Voters:   1401<br />Voters:   1401","fct_reorder(county, Voters): GRANT<br />Voters:   5529<br />Voters:   5529","fct_reorder(county, Voters): HARNEY<br />Voters:   5508<br />Voters:   5508","fct_reorder(county, Voters): HOOD RIVER<br />Voters:  15791<br />Voters:  15791","fct_reorder(county, Voters): JACKSON<br />Voters: 161594<br />Voters: 161594","fct_reorder(county, Voters): JEFFERSON<br />Voters:  16128<br />Voters:  16128","fct_reorder(county, Voters): JOSEPHINE<br />Voters:  68959<br />Voters:  68959","fct_reorder(county, Voters): KLAMATH<br />Voters:  49375<br />Voters:  49375","fct_reorder(county, Voters): LAKE<br />Voters:   5431<br />Voters:   5431","fct_reorder(county, Voters): LANE<br />Voters: 274665<br />Voters: 274665","fct_reorder(county, Voters): LINCOLN<br />Voters:  38440<br />Voters:  38440","fct_reorder(county, Voters): LINN<br />Voters:  94188<br />Voters:  94188","fct_reorder(county, Voters): MALHEUR<br />Voters:  16812<br />Voters:  16812","fct_reorder(county, Voters): MARION<br />Voters: 215012<br />Voters: 215012","fct_reorder(county, Voters): MORROW<br />Voters:   6779<br />Voters:   6779","fct_reorder(county, Voters): MULTNOMAH<br />Voters: 572333<br />Voters: 572333","fct_reorder(county, Voters): POLK<br />Voters:  60775<br />Voters:  60775","fct_reorder(county, Voters): SHERMAN<br />Voters:   1437<br />Voters:   1437","fct_reorder(county, Voters): TILLAMOOK<br />Voters:  20732<br />Voters:  20732","fct_reorder(county, Voters): UMATILLA<br />Voters:  46898<br />Voters:  46898","fct_reorder(county, Voters): UNION<br />Voters:  19058<br />Voters:  19058","fct_reorder(county, Voters): WALLOWA<br />Voters:   5933<br />Voters:   5933","fct_reorder(county, Voters): WASCO<br />Voters:  18264<br />Voters:  18264","fct_reorder(county, Voters): WASHINGTON<br />Voters: 386696<br />Voters: 386696","fct_reorder(county, Voters): WHEELER<br />Voters:   1090<br />Voters:   1090","fct_reorder(county, Voters): YAMHILL<br />Voters:  73893<br />Voters:  73893"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(255,255,255,1)","line":{"width":1.88976377952756,"color":"rgba(135,206,235,1)"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[12537,60675,308827,30457,40327,47810,19265,18713,152679,84145,1401,5529,5508,15791,161594,16128,68959,49375,5431,274665,38440,94188,16812,215012,6779,572333,60775,1437,20732,46898,19058,5933,18264,386696,1090,73893],"y":[9,24,34,18,20,22,16,14,30,28,2,6,5,10,31,11,26,23,4,33,19,29,12,32,8,36,25,3,17,21,15,7,13,35,1,27],"text":[12537,60675,308827,30457,40327,47810,19265,18713,152679,84145,1401,5529,5508,15791,161594,16128,68959,49375,5431,274665,38440,94188,16812,215012,6779,572333,60775,1437,20732,46898,19058,5933,18264,386696,1090,73893],"hovertext":["fct_reorder(county, Voters): BAKER<br />Voters:  12537<br />Voters:  12537","fct_reorder(county, Voters): BENTON<br />Voters:  60675<br />Voters:  60675","fct_reorder(county, Voters): CLACKAMAS<br />Voters: 308827<br />Voters: 308827","fct_reorder(county, Voters): CLATSOP<br />Voters:  30457<br />Voters:  30457","fct_reorder(county, Voters): COLUMBIA<br />Voters:  40327<br />Voters:  40327","fct_reorder(county, Voters): COOS<br />Voters:  47810<br />Voters:  47810","fct_reorder(county, Voters): CROOK<br />Voters:  19265<br />Voters:  19265","fct_reorder(county, Voters): CURRY<br />Voters:  18713<br />Voters:  18713","fct_reorder(county, Voters): DESCHUTES<br />Voters: 152679<br />Voters: 152679","fct_reorder(county, Voters): DOUGLAS<br />Voters:  84145<br />Voters:  84145","fct_reorder(county, Voters): GILLIAM<br />Voters:   1401<br />Voters:   1401","fct_reorder(county, Voters): GRANT<br />Voters:   5529<br />Voters:   5529","fct_reorder(county, Voters): HARNEY<br />Voters:   5508<br />Voters:   5508","fct_reorder(county, Voters): HOOD RIVER<br />Voters:  15791<br />Voters:  15791","fct_reorder(county, Voters): JACKSON<br />Voters: 161594<br />Voters: 161594","fct_reorder(county, Voters): JEFFERSON<br />Voters:  16128<br />Voters:  16128","fct_reorder(county, Voters): JOSEPHINE<br />Voters:  68959<br />Voters:  68959","fct_reorder(county, Voters): KLAMATH<br />Voters:  49375<br />Voters:  49375","fct_reorder(county, Voters): LAKE<br />Voters:   5431<br />Voters:   5431","fct_reorder(county, Voters): LANE<br />Voters: 274665<br />Voters: 274665","fct_reorder(county, Voters): LINCOLN<br />Voters:  38440<br />Voters:  38440","fct_reorder(county, Voters): LINN<br />Voters:  94188<br />Voters:  94188","fct_reorder(county, Voters): MALHEUR<br />Voters:  16812<br />Voters:  16812","fct_reorder(county, Voters): MARION<br />Voters: 215012<br />Voters: 215012","fct_reorder(county, Voters): MORROW<br />Voters:   6779<br />Voters:   6779","fct_reorder(county, Voters): MULTNOMAH<br />Voters: 572333<br />Voters: 572333","fct_reorder(county, Voters): POLK<br />Voters:  60775<br />Voters:  60775","fct_reorder(county, Voters): SHERMAN<br />Voters:   1437<br />Voters:   1437","fct_reorder(county, Voters): TILLAMOOK<br />Voters:  20732<br />Voters:  20732","fct_reorder(county, Voters): UMATILLA<br />Voters:  46898<br />Voters:  46898","fct_reorder(county, Voters): UNION<br />Voters:  19058<br />Voters:  19058","fct_reorder(county, Voters): WALLOWA<br />Voters:   5933<br />Voters:   5933","fct_reorder(county, Voters): WASCO<br />Voters:  18264<br />Voters:  18264","fct_reorder(county, Voters): WASHINGTON<br />Voters: 386696<br />Voters: 386696","fct_reorder(county, Voters): WHEELER<br />Voters:   1090<br />Voters:   1090","fct_reorder(county, Voters): YAMHILL<br />Voters:  73893<br />Voters:  73893"],"textfont":{"size":8.31496062992126,"color":"rgba(0,0,0,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":84.0182648401827},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-28616.65,600949.65],"tickmode":"array","ticktext":["0","200000","400000","600000"],"tickvals":[0,200000,400000,600000],"categoryorder":"array","categoryarray":["0","200000","400000","600000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Registered Voters","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,36.6],"tickmode":"array","ticktext":["WHEELER","GILLIAM","SHERMAN","LAKE","HARNEY","GRANT","WALLOWA","MORROW","BAKER","HOOD RIVER","JEFFERSON","MALHEUR","WASCO","CURRY","UNION","CROOK","TILLAMOOK","CLATSOP","LINCOLN","COLUMBIA","UMATILLA","COOS","KLAMATH","BENTON","POLK","JOSEPHINE","YAMHILL","DOUGLAS","LINN","DESCHUTES","JACKSON","MARION","LANE","CLACKAMAS","WASHINGTON","MULTNOMAH"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36],"categoryorder":"array","categoryarray":["WHEELER","GILLIAM","SHERMAN","LAKE","HARNEY","GRANT","WALLOWA","MORROW","BAKER","HOOD RIVER","JEFFERSON","MALHEUR","WASCO","CURRY","UNION","CROOK","TILLAMOOK","CLATSOP","LINCOLN","COLUMBIA","UMATILLA","COOS","KLAMATH","BENTON","POLK","JOSEPHINE","YAMHILL","DOUGLAS","LINN","DESCHUTES","JACKSON","MARION","LANE","CLACKAMAS","WASHINGTON","MULTNOMAH"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"County","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"208f61fb4e01":{"x":{},"y":{},"label":{},"type":"bar"},"208f39be55e8":{"x":{},"y":{},"label":{}}},"cur_data":"208f61fb4e01","visdat":{"208f61fb4e01":["function (y) ","x"],"208f39be55e8":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<div id="the-balance-of-registrations" class="section level2">
<h2>The Balance of Registrations</h2>
<pre class="r"><code>CurrVR &lt;- VoterReg %&gt;% filter(sysdate == &quot;2020-11-03&quot;)
CurrVR$DRE &lt;- &quot;Other&quot;
CurrVR$DRE[CurrVR$party==&quot;Democrat&quot;] &lt;- &quot;Democrat&quot;
CurrVR$DRE[CurrVR$party==&quot;Republican&quot;] &lt;- &quot;Republican&quot;
CurrVR %&gt;% group_by(county) %&gt;% mutate(Voters = sum(count_v_id)) %&gt;% ggplot(., aes(x=fct_reorder(county, Voters), y=Voters, label=Voters)) + geom_col() + geom_text(size=2.2) + coord_flip() + labs(x=&quot;County&quot;, y=&quot;Registered Voters&quot;) + theme_minimal()</code></pre>
<p><img src="{{< blogdown/postref >}}index.en_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
<div id="the-plot-by-party" class="section level2">
<h2>The Plot by Party</h2>
<p>Now let me split these up by grouping and plot them.</p>
<pre class="r"><code>CurrVR %&gt;% group_by(county, DRE) %&gt;% summarise(Voters = sum(count_v_id)) %&gt;%
ggplot(.) +
 aes(x = fct_reorder(county, Voters), y=Voters, fill = DRE) +
 geom_col() + scale_fill_viridis_d() +
 coord_flip() +
 theme_minimal() + labs(x=&quot;County&quot;)</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;county&#39;. You can override using the `.groups` argument.</code></pre>
<p><img src="{{< blogdown/postref >}}index.en_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
</div>
